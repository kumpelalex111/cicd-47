# Домашнее задание к занятию «Защита сети» - Хрипун Алексей

---

### Задание 1

Проведите разведку системы и определите, какие сетевые службы запущены на защищаемой системе:

sudo nmap -sA < ip-адрес >

sudo nmap -sT < ip-адрес >

sudo nmap -sS < ip-адрес >

sudo nmap -sV < ip-адрес >

По желанию можете поэкспериментировать с опциями: https://nmap.org/man/ru/man-briefoptions.html.

*В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат.*


### Решение 1

ACK-сканирование (-sA) в лог Suricata не попало.
Остальные виды сканирования (TCP, SYN и при определении версий открытых служб) Suricata зафиксировал в своем лог-файле.

![nmap -sT](img/task1_2.png)

![nmap -sS](img/task1_3.png)

![nmap -sV](img/task1_4.png)

События скнирования в лог-файл Fail2ban не попадает, т.к. эта служба отслеживает попытки аутентификации.

### Задание 2

Проведите атаку на подбор пароля для службы SSH:

hydra -L users.txt -P pass.txt < ip-адрес > ssh

1. Настройка hydra:
* создайте два файла: users.txt и pass.txt;
* в каждой строчке первого файла должны быть имена пользователей, второго — пароли. В нашем случае это могут быть случайные строки, но ради эксперимента можете добавить имя и пароль существующего пользователя.

2. Включение защиты SSH для Fail2Ban:
* открыть файл /etc/fail2ban/jail.conf,
* найти секцию ssh,
* установить enabled в true.

*В качестве ответа пришлите события, которые попали в логи Suricata и Fail2Ban, прокомментируйте результат.*

### Решение 2

При настройке Hydra в файлы с логинами и паролями была записана корректная пара логин-пароль. При запуске без fail2ban пароль был подобран
![hydra](img/task2_1.png)

Запускаем Fail2ban и пробуем снова подобрать пароль. В этот раз подключение было заблокировано:
![hydra](img/task2_2.png)

В логах fail2ban видно, что атакующий хост на какое-то время был заблокирован:
![hydra](img/task2_33.png)

В логах Suricata также видны неудачные попытки аутентификации по SSH:
![hydra_Suricata](img/task2_4.png)





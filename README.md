# Домашнее задание к занятию «Базы данных, их типы» - Хрипун Алексей

---

## Задание 1. СУБД

### Кейс
`Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.`

`Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?`

1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

Приведите ответ в свободной форме.

### Решение
`1.1  Реляционная база данных обеспечивает целостность данных (ACID). Кроме того, нужна четкая структура данных – в реляционных базах данных данные хранятся в таблицах, которые строго структурированы.`

`1.2  Считается, что гибкость и скорость обеспечивают базы данных NoSQL. Для хранения лендингов подойдет документоориентированная СУБД (например, MongoDB). В CRM системах обычно  используется реляционная СУБД (множество связанных между собой таблиц).`
`Обе задачи можно закрыть реляционной СУБД (лендинги можно хранить в виде файлов в базе данных с помощью FILESTREAM в SQL Server или типа данных BYTEA в PostgreSQL).`

`1.3  Для хранения документов (корпоративные нормы и правила в том числе), да еще и с простой и понятной структурой, удобнее всего в документоориентированной БД (например Mongo).
Эту же задачу можно реализовать и в реляционной базе данных.`

`1.4  Работа со связями и сложными взаимосвязями лучше всего реализована в графовых БД.`
`Для отдела закупок лучше использовать реляционную базу данных (много структурированных данных, бывает сложная аналитика) в связке с СУБД логистов.`

`1.5  Все перечисленные выше задачи можно решить с помощью реляционной БД, но нужно очень тщательное планирование (это критически важно) структуры БД.`

## Задание 2. Транзакции
`2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.`

`2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?`

`Приведите ответ в свободной форме.`

### Решение.
Действия, которые должны пройти для успешного выполнения транзакции:
1. проверить, что номер существует (корректно указан)
2. прочитать счет списания и проверить, что на счете достаточно средств
3. списать средства со счета списания
4. сохранить новый баланс счета списания
5. прочитать баланс счета телефона
6. зачислить средства на счет телефона
7. записать новый баланс счета телефона

## Задание 3. SQL vs NoSQL
3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

Приведите ответ в свободной форме.

### Решение.
`Преимущества SQL-систем по отношения к NoSQL:`
1.  В SQL базах используется транзакционная модель, которая позволяет сохранить целостность данных и обеспечивать ACID
2.  SQL – мощный язык запросов, поэтому это лучший выбор для сложных запросов, связанных с большим количеством таблиц.
3.  SQL – зрелая, хорошо стандартизированная и документированная технология.  
4.  Простота в использовании – язык SQL довольно простой.
5.  Совместимость с популярными языками программирования, такими как Python, Java и C#.

## Задание 4. Кластеры
Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

Приведите ответ в свободной форме.

## Решение.
`При выделении 1000 нод для кластера, большинство (если не все) реляционные СУБД упираются в ограничение нод для кластера (в MySQL, например, максимальное число нод в кластере 68). Для такой задачи нужна модель MapReduce – модель распределенных вычислений, которая параллельно обрабатывает большие объемы данных, разделяя процессы вычисления между множеством серверов. По этой модели работает Apache Hadoop – инструмент для построения системы работы с большими данными. Он предназначен для сбора, хранения и распределенной обработки сотен терабайт информации, которая поступает непрерывным потоком. Система состоит из кластеров – групп отдельных узлов, которые используются как единый ресурс. Когда на кластер поступает большая задача, Hadoop делит ее на много мелких задач и выполняет каждую на своем узле.`

